!!! 5
%html{ lang: "#{I18n.locale}" }
  %head
    %title= "#{Setting.brand} - #{current_user.role.titleize}"
    %meta{ charset: 'UTF-8' }
    = csrf_meta_tags
    = stylesheet_link_tag 'application', media: 'all', data: { turbolinks_track: 'reload' }
    = javascript_include_tag 'application', data: { turbolinks_track: 'reload' }
    %meta{ name: 'viewport', content: 'width=device-width, initial-scale=1.0' }
    %meta{ name: 'description', content: 'Learning Management System' }
  %body.background
    .container-fluid.h-100
      %nav.navbar.navbar-dark.navbar-expand-md{ class: "#{current_user.role}-navbar-color" }
        = link_to root_path, class: 'navbar-brand' do
          = Setting.brand
        .collapse.navbar-collapse
          %ul.navbar-nav.ml-auto
            %li.nav-item.dropdown
              = link_to '#', id: 'userMenu', class: 'nav-link dropdown-toggle',
                        data: { toggle: 'dropdown' },
                        aria: { haspopup: 'true', expanded: 'false' } do
                = user_avatar_tag current_user, size: '25x25',
                              class: 'rounded-circle'
                = current_user.first_name
              .dropdown-menu.dropdown-menu-right{ aria: { labelledby: 'userMenu' } }
                - if current_user.admin?
                  = link_to settings_path, class: 'dropdown-item' do
                    = icon('cog')
                    = _('Settings')
                  .dropdown-divider
                = link_to logout_path, class: 'dropdown-item' do
                  = icon('power-off')
                  = _('Log Out')
      - unless flash.empty?
        .row.mt-3
          .col
            = flash_messages
      .row.mt-3
        .col-md-2
          .row
            .col
              = render 'shared/sidebar_nav'
          .row.mt-2
            .col
              = render 'conversations/conversations', chats: @chats
        .col-md-10
          .row
            .col
              - breadcrumbs.tap do |b|
                - if b.any?
                  %ol.breadcrumb
                    - b.each do |l|
                      %li{ class: "breadcrumb-item #{'active' if l.current?}" }
                        - if !l.current?
                          = link_to l.text, l.url
                        - else
                          = l.text
          .row
            .col
              = yield
